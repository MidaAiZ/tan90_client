<!DOCTYPE HTML>
<html>
	<head>
		<title>Home</title>
		<link href="/view/css/bootstrap.css" rel='stylesheet' type='text/css'/>
		<!-- Custom Theme files -->
		<link href="/view/css/style.css" rel='stylesheet' type='text/css'/>
		<link href="/view/css/usercenter.css" rel='stylesheet' type='text/css'/>
		<script src="/view/js/jquery.min.js"></script>
		<!-- jQuery (necessary JavaScript plugins) -->
		<script src="/view/js/bootstrap.js"></script>
		<script src="data:application/octet-stream;base64,Uk9PVCA9ICJodHRwOi8vMTE1LjE1OS4xODguMjAwOjgwMDAvIgpJTUdST09UID0gImh0dHA6Ly8xMTUuMTU5LjE4OC4yMDA6ODAwMCIKCi8v5Liq5Lq65Lit5b+D5L+u5pS5CgovL+aehOW7uueUqOS6jmFqYXjkuqTkupLnmoTooajljZUKZnVuY3Rpb24gYnVpbGRGb3JtKCkgewogICAgdmFyICRpbnB1dEVsZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/ICIiIDogYXJndW1lbnRzWzBdOwoKICAgIHZhciAkZm9ybSA9ICQoIjxmb3JtIGlkPSdhamF4Rm9ybScgbWV0aG9kPSdwb3N0Jz48L2Zvcm0+IiksCiAgICAgICAgY3NyZlRva2VuID0gJCgnbWV0YVtuYW1lPWNzcmYtdG9rZW5dJykuYXR0cignY29udGVudCcpLAogICAgICAgIGNzcmZQYXJhbSA9ICQoJ21ldGFbbmFtZT1jc3JmLXBhcmFtXScpLmF0dHIoJ2NvbnRlbnQnKTsKCiAgICBpZiAoY3NyZlBhcmFtICE9PSB1bmRlZmluZWQgJiYgY3NyZlRva2VuICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAkZm9ybS5hcHBlbmQoJCgnPGlucHV0IG5hbWU9IicgKyBjc3JmUGFyYW0gKyAnIiB2YWx1ZT0iJyArIGNzcmZUb2tlbiArICciIHR5cGU9ImhpZGRlbiIgLz4nKSk7CiAgICB9CgogICAgJGZvcm0uYXBwZW5kKCRpbnB1dEVsZSk7CiAgICByZXR1cm4gJGZvcm07Cn0KCmZ1bmN0aW9uIGNvbmZpcm0odGl0bGUsIHRleHQsIGNhbGxiYWNrKSB7CiAgICBpZiAoJCgiI2J0bi1jb25maXJtLW1vZGFsIikubGVuZ3RoID4gMCkgewogICAgICAgICQoIiNidG4tY29uZmlybS1tb2RhbCIpLnJlbW92ZSgpOwogICAgfQogICAgdmFyIGh0bWwgPSAkKCI8ZGl2IGNsYXNzPSdtb2RhbCBmYWRlJyBpZD0nYnRuLWNvbmZpcm0tbW9kYWwnID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSdtb2RhbC1kaWFsb2cnIHN0eWxlPSd6LWluZGV4OjExMjQ7IHdpZHRoOjQwMHB4OyBtYXJnaW4tdG9wOjIwMHB4Oyc+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSdtb2RhbC1jb250ZW50JyBzdHlsZT0nIHdpZHRoOiAxMDAlOyc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9J21vZGFsLWJvZHkgdGV4dC1jZW50ZXInIGlkPSdteUNvbmZpcm1Db250ZW50Jz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2Nsb3NlJyBkYXRhLWRpc21pc3M9J21vZGFsJyBzdHlsZT0nbWFyZ2luOiAtMTBweCAtMTBweCAwIDA7Jz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSdmb250LXNpemU6MTVweDsgY29sb3I6IHJlZDsgdG9wOiAwcHg7JyBjbGFzcz0nZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUnPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPSdpbmZvLXRleHQnIHN0eWxlPVwiY29sb3I6IGJsYWNrO1wiPlxuICAgICAgICAgICAgICAgICIgKyB0ZXh0ICsgIlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nbW9kYWwtZm9vdGVyICcgc3R5bGU9J3BhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyc+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nYnRuLXNtIGJ0bi1kYW5nZXInIGRhdGEtZGlzbWlzcz0nbW9kYWwnIHN0eWxlPSdtYXJnaW4tcmlnaHQ6IDVweDsgYm9yZGVyOiBub25lOyc+5Y+W5raIPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nYnRuLXNtIGJ0bi1wcmltYXJ5JyBpZD0nY29uZmlybU9rJyBzdHlsZT0nbWFyZ2luLWxlZnQ6IDVweDsgYm9yZGVyOiBub25lOyc+56Gu5a6aPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PiIpOwoKICAgICQoImJvZHkiKS5hcHBlbmQoaHRtbCk7CgogICAgJCgiI2J0bi1jb25maXJtLW1vZGFsIikubW9kYWwoInNob3ciKTsKICAgICQoIiNjb25maXJtT2siKS5mb2N1cygpOwoKICAgICQoIiNjb25maXJtT2siKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiI2J0bi1jb25maXJtLW1vZGFsIikubW9kYWwoImhpZGUiKS5iaW5kKCJoaWRkZW4uYnMubW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoIiNidG4tY29uZmlybS1tb2RhbCIpLnJlbW92ZSgpOwogICAgICAgIH0pOwogICAgICAgIGNhbGxiYWNrKCk7IC8vIOaJp+ihjOWHveaVsAogICAgfSk7CiAgICByZXR1cm4gZmFsc2U7Cn07CgoKJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewoKICAgIC8v5qC35byP5pS55Y+YCiAgICAkKCcqW3JvbGU9cmV2aXNlXScpLm9uKCJjbGljayIsIHNob3dSZXZpc2UpOwogICAgJCgiKltyb2xlPSdjYW5jZWwnXSwgKltyb2xlPSdjb25mb3JtJ10iKS5vbigiY2xpY2siLCBkaXNtaXNzUmV2aXNlKTsKICAgIC8v56Gu6K6k5L+u5pS5CiAgICAkKCIqW3JvbGU9J2NvbmZvcm0nXSIpLm9uKCJjbGljayIsIGRvUmV2aXNlKTsKICAgICQoIipbcm9sZT0nZWRpdCddIikub24oImRpc21pc3MiLCBkaXNtaXNzUmV2aXNlKS5vbigia2V5dXAiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLndoaWNoID09PSAxMykgewogICAgICAgICAgICBkb1JldmlzZS5jYWxsKHRoaXMpOwogICAgICAgICAgICBkaXNtaXNzUmV2aXNlLmNhbGwodGhpcyk7CiAgICAgICAgfQogICAgfSk7Cn0pOwoKLy8g5pi+56S65Y+W5raI5ZKM56Gu6K6k5L+u5pS555qE5oyJ6ZKuCmZ1bmN0aW9uIHNob3dSZXZpc2UoKSB7CiAgICB2YXIgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudHMoIi5pbmZvLWl0ZW0iKTsKCiAgICAvLyDpmpDol4/lhbbku5bkv67mlLnmoYYKICAgICQoIipbcm9sZT0nZWRpdCddIikubm90KCQodGhpcykpLnRyaWdnZXIoImRpc21pc3MiKTsKCiAgICAvL+abtOaUueWGheWuuQogICAgdmFyIGN1cnJlbnRJbmZvID0gJGl0ZW0uZmluZCgiKltyb2xlPSdpbmZvJ10iKS50ZXh0KCkudHJpbSgpOwoKICAgIC8v5pi+56S65ZKM6ZqQ6JePCiAgICAkaXRlbS5maW5kKCIqW3JvbGU9J2luZm8nXSIpLmhpZGUoKS5zaWJsaW5ncygpLnNob3coKTsKICAgICRpdGVtLmZpbmQoIi5yZXZpc2UiKS5oaWRlKCkuc2libGluZ3MoKS5zaG93KCk7CiAgICAvLyDmm7TmlLnlhoXlrrnlubbojrflj5bnhKbngrkKICAgICRpdGVtLmZpbmQoIipbcm9sZT0nZWRpdCddIikudmFsKGN1cnJlbnRJbmZvKS5mb2N1cygpOwp9CgovLyDpmpDol48KZnVuY3Rpb24gZGlzbWlzc1JldmlzZSgpIHsKICAgIHZhciAkaXRlbSA9ICQodGhpcykucGFyZW50cygiLmluZm8taXRlbSIpOwogICAgJGl0ZW0uZmluZCgiLmNvbnRyb2wtZ3JvdXAiKS5oaWRlKCkuc2libGluZ3MoKS5zaG93KCk7CiAgICAkaXRlbS5maW5kKCIqW3JvbGU9J2luZm8nXSIpLnNob3coKS5zaWJsaW5ncygpLmhpZGUoKTsKfQovLyDkv67mlLkKZnVuY3Rpb24gZG9SZXZpc2UoKSB7CiAgICB2YXIgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudHMoIi5pbmZvLWl0ZW0iKTsKICAgIHZhciAkdGFyZ2V0ID0gJGl0ZW0uZmluZCgiKltyb2xlPSdlZGl0J10iKTsKICAgIHZhciAkaW5wdXQgPSAkKCI8aW5wdXQgbmFtZT1cIiIgKyAkdGFyZ2V0LmF0dHIoIm5hbWUiKSArICJcIiB2YWx1ZT1cIiIgKyAkdGFyZ2V0LnZhbCgpICsgIlwiIHR5cGU9XCJoaWRkZW5cIiAvPiIpOwogICAgdmFyIHVybCA9IFJPT1QgKyAiZG9fbW9kaWZ5X3VzZXJfcHJvZmlsZS8iOwogICAgdmFyICRyZXZpc2VFbGUgPSAkaXRlbS5maW5kKCIqW3JvbGU9J2luZm8nXSIpOwogICAgdmFyIGF0dHIgPSAkcmV2aXNlRWxlLmRhdGEoJ2F0dHInKTsKICAgICRyZXZpc2VFbGUudGV4dCgkdGFyZ2V0LnZhbCgpKTsKCiAgICB2YXIgJGFqYXhGb3JtID0gYnVpbGRGb3JtKCRpbnB1dCk7CiAgICByZXZpc2VJbmZvKCRhamF4Rm9ybSwgdXJsLCAkaXRlbSk7Cn0KCi8v5Liq5Lq65Lit5b+D5L+u5pS5YWpheOWQjuWPsOS6pOS6kgpmdW5jdGlvbiByZXZpc2VJbmZvKCRhamF4Rm9ybSwgdXJsLCAkaXRlbSkgewogICAgJC5hamF4KHsKICAgICAgICBkYXRhOiAkYWpheEZvcm0uc2VyaWFsaXplKCksCiAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICB1cmw6IHVybCwKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgY3Jvc3NEb21haW46IHRydWUsCiAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgIH0KICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIHZhciAkcmV2aXNlRWxlID0gJGl0ZW0uZmluZCgiKltyb2xlPSdpbmZvJ10iKTsKICAgICAgICAvLyB2YXIgYXR0ciA9ICRyZXZpc2VFbGUuZGF0YSgnYXR0cicpOwogICAgICAgIC8vICRyZXZpc2VFbGUudGV4dChyZXNbYXR0cl0pOwogICAgfSkuZmFpbChmdW5jdGlvbiAocmVzKSB7fSk7CiAgICAkYWpheEZvcm0ucmVtb3ZlKCk7Cn07Ci8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBCb290c3RyYXA6IGRyb3Bkb3duLmpzIHYzLjMuNwogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNkcm9wZG93bnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCgoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBEUk9QRE9XTiBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgYmFja2Ryb3AgPSAnLmRyb3Bkb3duLWJhY2tkcm9wJwogIHZhciB0b2dnbGUgICA9ICdbZGF0YS10b2dnbGU9ImRyb3Bkb3duIl0nCiAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICQoZWxlbWVudCkub24oJ2NsaWNrLmJzLmRyb3Bkb3duJywgdGhpcy50b2dnbGUpCiAgfQoKICBEcm9wZG93bi5WRVJTSU9OID0gJzMuMy43JwoKICBmdW5jdGlvbiBnZXRQYXJlbnQoJHRoaXMpIHsKICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykKCiAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpCiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgLyNbQS1aYS16XS8udGVzdChzZWxlY3RvcikgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cc10qJCkvLCAnJykgLy8gc3RyaXAgZm9yIGllNwogICAgfQoKICAgIHZhciAkcGFyZW50ID0gc2VsZWN0b3IgJiYgJChzZWxlY3RvcikKCiAgICByZXR1cm4gJHBhcmVudCAmJiAkcGFyZW50Lmxlbmd0aCA/ICRwYXJlbnQgOiAkdGhpcy5wYXJlbnQoKQogIH0KCiAgZnVuY3Rpb24gY2xlYXJNZW51cyhlKSB7CiAgICBpZiAoZSAmJiBlLndoaWNoID09PSAzKSByZXR1cm4KICAgICQoYmFja2Ryb3ApLnJlbW92ZSgpCiAgICAkKHRvZ2dsZSkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyAgICAgICAgID0gJCh0aGlzKQogICAgICB2YXIgJHBhcmVudCAgICAgICA9IGdldFBhcmVudCgkdGhpcykKICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfQoKICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykpIHJldHVybgoKICAgICAgaWYgKGUgJiYgZS50eXBlID09ICdjbGljaycgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSAmJiAkLmNvbnRhaW5zKCRwYXJlbnRbMF0sIGUudGFyZ2V0KSkgcmV0dXJuCgogICAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ2hpZGUuYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSkKCiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4KCiAgICAgICR0aGlzLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKQogICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuJykudHJpZ2dlcigkLkV2ZW50KCdoaWRkZW4uYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSkKICAgIH0pCiAgfQoKICBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkdGhpcyA9ICQodGhpcykKCiAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVybgoKICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcykKICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKQoKICAgIGNsZWFyTWVudXMoKQoKICAgIGlmICghaXNBY3RpdmUpIHsKICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhJHBhcmVudC5jbG9zZXN0KCcubmF2YmFyLW5hdicpLmxlbmd0aCkgewogICAgICAgIC8vIGlmIG1vYmlsZSB3ZSB1c2UgYSBiYWNrZHJvcCBiZWNhdXNlIGNsaWNrIGV2ZW50cyBkb24ndCBkZWxlZ2F0ZQogICAgICAgICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpCiAgICAgICAgICAuYWRkQ2xhc3MoJ2Ryb3Bkb3duLWJhY2tkcm9wJykKICAgICAgICAgIC5pbnNlcnRBZnRlcigkKHRoaXMpKQogICAgICAgICAgLm9uKCdjbGljaycsIGNsZWFyTWVudXMpCiAgICAgIH0KCiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0geyByZWxhdGVkVGFyZ2V0OiB0aGlzIH0KICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdzaG93LmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpCgogICAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuCgogICAgICAkdGhpcwogICAgICAgIC50cmlnZ2VyKCdmb2N1cycpCiAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpCgogICAgICAkcGFyZW50CiAgICAgICAgLnRvZ2dsZUNsYXNzKCdvcGVuJykKICAgICAgICAudHJpZ2dlcigkLkV2ZW50KCdzaG93bi5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKQogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH0KCiAgRHJvcGRvd24ucHJvdG90eXBlLmtleWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgaWYgKCEvKDM4fDQwfDI3fDMyKS8udGVzdChlLndoaWNoKSB8fCAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpKSByZXR1cm4KCiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpCgogICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICBlLnN0b3BQcm9wYWdhdGlvbigpCgogICAgaWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm4KCiAgICB2YXIgJHBhcmVudCAgPSBnZXRQYXJlbnQoJHRoaXMpCiAgICB2YXIgaXNBY3RpdmUgPSAkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykKCiAgICBpZiAoIWlzQWN0aXZlICYmIGUud2hpY2ggIT0gMjcgfHwgaXNBY3RpdmUgJiYgZS53aGljaCA9PSAyNykgewogICAgICBpZiAoZS53aGljaCA9PSAyNykgJHBhcmVudC5maW5kKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKQogICAgICByZXR1cm4gJHRoaXMudHJpZ2dlcignY2xpY2snKQogICAgfQoKICAgIHZhciBkZXNjID0gJyBsaTpub3QoLmRpc2FibGVkKTp2aXNpYmxlIGEnCiAgICB2YXIgJGl0ZW1zID0gJHBhcmVudC5maW5kKCcuZHJvcGRvd24tbWVudScgKyBkZXNjKQoKICAgIGlmICghJGl0ZW1zLmxlbmd0aCkgcmV0dXJuCgogICAgdmFyIGluZGV4ID0gJGl0ZW1zLmluZGV4KGUudGFyZ2V0KQoKICAgIGlmIChlLndoaWNoID09IDM4ICYmIGluZGV4ID4gMCkgICAgICAgICAgICAgICAgIGluZGV4LS0gICAgICAgICAvLyB1cAogICAgaWYgKGUud2hpY2ggPT0gNDAgJiYgaW5kZXggPCAkaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKyAgICAgICAgIC8vIGRvd24KICAgIGlmICghfmluZGV4KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMAoKICAgICRpdGVtcy5lcShpbmRleCkudHJpZ2dlcignZm9jdXMnKQogIH0KCgogIC8vIERST1BET1dOIFBMVUdJTiBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcykKICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMuZHJvcGRvd24nKQoKICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicsIChkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMpKSkKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKQogICAgfSkKICB9CgogIHZhciBvbGQgPSAkLmZuLmRyb3Bkb3duCgogICQuZm4uZHJvcGRvd24gICAgICAgICAgICAgPSBQbHVnaW4KICAkLmZuLmRyb3Bkb3duLkNvbnN0cnVjdG9yID0gRHJvcGRvd24KCgogIC8vIERST1BET1dOIE5PIENPTkZMSUNUCiAgLy8gPT09PT09PT09PT09PT09PT09PT0KCiAgJC5mbi5kcm9wZG93bi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbi5kcm9wZG93biA9IG9sZAogICAgcmV0dXJuIHRoaXMKICB9CgoKICAvLyBBUFBMWSBUTyBTVEFOREFSRCBEUk9QRE9XTiBFTEVNRU5UUwogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogICQoZG9jdW1lbnQpCiAgICAub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgY2xlYXJNZW51cykKICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCAnLmRyb3Bkb3duIGZvcm0nLCBmdW5jdGlvbiAoZSkgeyBlLnN0b3BQcm9wYWdhdGlvbigpIH0pCiAgICAub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKQogICAgLm9uKCdrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93bikKICAgIC5vbigna2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaScsICcuZHJvcGRvd24tbWVudScsIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duKQoKfShqUXVlcnkpOwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQm9vdHN0cmFwOiB0YWIuanMgdjMuMy43CiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RhYnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCgoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBUQUIgQ0xBU1MgREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09CgogIHZhciBUYWIgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgLy8ganNjczpkaXNhYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50CiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpCiAgICAvLyBqc2NzOmVuYWJsZSByZXF1aXJlRG9sbGFyQmVmb3JlalF1ZXJ5QXNzaWdubWVudAogIH0KCiAgVGFiLlZFUlNJT04gPSAnMy4zLjcnCgogIFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwCgogIFRhYi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciAkdGhpcyAgICA9IHRoaXMuZWxlbWVudAogICAgdmFyICR1bCAgICAgID0gJHRoaXMuY2xvc2VzdCgndWw6bm90KC5kcm9wZG93bi1tZW51KScpCiAgICB2YXIgc2VsZWN0b3IgPSAkdGhpcy5kYXRhKCd0YXJnZXQnKQoKICAgIGlmICghc2VsZWN0b3IpIHsKICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJykKICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3CiAgICB9CgogICAgaWYgKCR0aGlzLnBhcmVudCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVybgoKICAgIHZhciAkcHJldmlvdXMgPSAkdWwuZmluZCgnLmFjdGl2ZTpsYXN0IGEnKQogICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoJ2hpZGUuYnMudGFiJywgewogICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXQogICAgfSkKICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLnRhYicsIHsKICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdCiAgICB9KQoKICAgICRwcmV2aW91cy50cmlnZ2VyKGhpZGVFdmVudCkKICAgICR0aGlzLnRyaWdnZXIoc2hvd0V2ZW50KQoKICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4KCiAgICB2YXIgJHRhcmdldCA9ICQoc2VsZWN0b3IpCgogICAgdGhpcy5hY3RpdmF0ZSgkdGhpcy5jbG9zZXN0KCdsaScpLCAkdWwpCiAgICB0aGlzLmFjdGl2YXRlKCR0YXJnZXQsICR0YXJnZXQucGFyZW50KCksIGZ1bmN0aW9uICgpIHsKICAgICAgJHByZXZpb3VzLnRyaWdnZXIoewogICAgICAgIHR5cGU6ICdoaWRkZW4uYnMudGFiJywKICAgICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXQogICAgICB9KQogICAgICAkdGhpcy50cmlnZ2VyKHsKICAgICAgICB0eXBlOiAnc2hvd24uYnMudGFiJywKICAgICAgICByZWxhdGVkVGFyZ2V0OiAkcHJldmlvdXNbMF0KICAgICAgfSkKICAgIH0pCiAgfQoKICBUYWIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAgIHZhciAkYWN0aXZlICAgID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpCiAgICB2YXIgdHJhbnNpdGlvbiA9IGNhbGxiYWNrCiAgICAgICYmICQuc3VwcG9ydC50cmFuc2l0aW9uCiAgICAgICYmICgkYWN0aXZlLmxlbmd0aCAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykgfHwgISFjb250YWluZXIuZmluZCgnPiAuZmFkZScpLmxlbmd0aCkKCiAgICBmdW5jdGlvbiBuZXh0KCkgewogICAgICAkYWN0aXZlCiAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICAgIC5maW5kKCc+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZScpCiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpCiAgICAgICAgLmVuZCgpCiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKQogICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSkKCiAgICAgIGVsZW1lbnQKICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpCiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKQogICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKQoKICAgICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgICBlbGVtZW50WzBdLm9mZnNldFdpZHRoIC8vIHJlZmxvdyBmb3IgdHJhbnNpdGlvbgogICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2luJykKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlJykKICAgICAgfQoKICAgICAgaWYgKGVsZW1lbnQucGFyZW50KCcuZHJvcGRvd24tbWVudScpLmxlbmd0aCkgewogICAgICAgIGVsZW1lbnQKICAgICAgICAgIC5jbG9zZXN0KCdsaS5kcm9wZG93bicpCiAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJykKICAgICAgICAgIC5lbmQoKQogICAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKQogICAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpCiAgICAgIH0KCiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCkKICAgIH0KCiAgICAkYWN0aXZlLmxlbmd0aCAmJiB0cmFuc2l0aW9uID8KICAgICAgJGFjdGl2ZQogICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIG5leHQpCiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6CiAgICAgIG5leHQoKQoKICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2luJykKICB9CgoKICAvLyBUQUIgUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT0KCiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcykKICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMudGFiJykKCiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudGFiJywgKGRhdGEgPSBuZXcgVGFiKHRoaXMpKSkKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpCiAgICB9KQogIH0KCiAgdmFyIG9sZCA9ICQuZm4udGFiCgogICQuZm4udGFiICAgICAgICAgICAgID0gUGx1Z2luCiAgJC5mbi50YWIuQ29uc3RydWN0b3IgPSBUYWIKCgogIC8vIFRBQiBOTyBDT05GTElDVAogIC8vID09PT09PT09PT09PT09PQoKICAkLmZuLnRhYi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbi50YWIgPSBvbGQKICAgIHJldHVybiB0aGlzCiAgfQoKCiAgLy8gVEFCIERBVEEtQVBJCiAgLy8gPT09PT09PT09PT09CgogIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkgewogICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICBQbHVnaW4uY2FsbCgkKHRoaXMpLCAnc2hvdycpCiAgfQoKICAkKGRvY3VtZW50KQogICAgLm9uKCdjbGljay5icy50YWIuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPSJ0YWIiXScsIGNsaWNrSGFuZGxlcikKICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT0icGlsbCJdJywgY2xpY2tIYW5kbGVyKQoKfShqUXVlcnkpOwovL+emgeeUqEVudGVy6ZSu6KGo5Y2V6Ieq5Yqo5o+Q5LqkCiJ1c2Ugc3RyaWN0IjsKCmRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIHRhcmdldCwgY29kZSwgdGFnOwogICAgaWYgKCFldmVudCkgewogICAgICAgIGV2ZW50ID0gd2luZG93LmV2ZW50OyAvL+mSiOWvuWll5rWP6KeI5ZmoCiAgICAgICAgdGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudDsKICAgICAgICBjb2RlID0gZXZlbnQua2V5Q29kZTsKICAgICAgICBpZiAoY29kZSA9PSAxMykgewogICAgICAgICAgICB0YWcgPSB0YXJnZXQudGFnTmFtZTsKICAgICAgICAgICAgaWYgKHRhZyA9PSAiVEVYVEFSRUEiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OyAvL+mSiOWvuemBteW+qnczY+agh+WHhueahOa1j+iniOWZqO+8jOWmgkZpcmVmb3gKICAgICAgICBjb2RlID0gZXZlbnQua2V5Q29kZTsKICAgICAgICBpZiAoY29kZSA9PSAxMykgewogICAgICAgICAgICB0YWcgPSB0YXJnZXQudGFnTmFtZTsKICAgICAgICAgICAgaWYgKHRhZyA9PSAiSU5QVVQiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsKLy8gJChmdW5jdGlvbigpIHsKLy8gICAgIHZhciBVbmxvYWRDb25maXJtID0ge307Ci8vICAgICBVbmxvYWRDb25maXJtLk1TR19VTkxPQUQgPSAi5pWw5o2u5bCa5pyq5L+d5a2Y77yM56a75byA5ZCO5Y+v6IO95Lya5a+86Ie05pWw5o2u5Lii5aSxXG5cbuaCqOehruWumuimgeemu+W8gOWQl++8nyI7Ci8vICAgICBVbmxvYWRDb25maXJtLnNldCA9IGZ1bmN0aW9uKGEpIHsKLy8gICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbihiKSB7Ci8vICAgICAgICAgICAgIGIgPSBiIHx8IHdpbmRvdy5ldmVudDsKLy8gICAgICAgICAgICAgYi5yZXR1cm5WYWx1ZSA9IGE7Ci8vICAgICAgICAgICAgIHJldHVybiBhCi8vICAgICAgICAgfQovLyAgICAgfTsKLy8gICAgIFVubG9hZENvbmZpcm0uY2xlYXIgPSBmdW5jdGlvbigpIHsKLy8gICAgICAgICBmY2tEcmFmdC5kZWxEcmFmdEJ5SWQoKTsKLy8gICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpIHt9Ci8vICAgICB9OwovLyAgICAgVW5sb2FkQ29uZmlybS5zZXQoVW5sb2FkQ29uZmlybS5NU0dfVU5MT0FEKTsKLy8gfSkKCi8qKgogKiDlvZPnprvlvIDpobXpnaLml7bvvIzlhoXlrrnmnInkv67mlLnkuJTmnKrmj5DkuqTvvIzlvLnlh7rnoa7orqTmoYborablkYoKICog5pqC5pe25LuF6YCC55So5LqOZm9ybeagh+etvgogKiDkvb/nlKjmlrnms5XvvJrlnKhmb3Jt5qCH562+5Lit5re75Yqg5bGe5oCnbGVhdmluZ1RpcD10cnVl5Y2z5Y+vCiAqLwoKJ3VzZSBzdHJpY3QnOwoKJChmdW5jdGlvbiAoKSB7CiAgICAvLyDlrprkuYnnrKblkIjopoHmsYLnmoTooajljZXlhYPntKAKICAgIHZhciBmb3JtU2VsZWN0ZWQgPSAiZm9ybVtsZWF2aW5nLXRpcD10cnVlXSI7CiAgICAvLyDliKTmlq3pobXpnaLkuIrmmK/lkKbmnInpnIDopoHmj5DnpLrnmoTooajljZUKICAgIGlmICgkKGZvcm1TZWxlY3RlZCkuaXMoJ2Zvcm0nKSkgewogICAgICAgIGxlYXZlV2FybmluZyhmb3JtU2VsZWN0ZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlYXZlV2FybmluZyhmb3JtU2VsZWN0ZWQpIHsKICAgICAgICB2YXIgaXNNb2RpZmllZCA9IGZhbHNlOwogICAgICAgIHZhciBub3RTdWJtaXQgPSB0cnVlOwoKICAgICAgICAkKGZvcm1TZWxlY3RlZCkuZmluZCgnaW5wdXQsc2VsZWN0LHRleHRhcmVhJykuY2hhbmdlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5Y+v6ICD6JmR5omp5bGV77yM5Yip55SodGhpc+WPmOmHj+adpemrmOS6rui/meS4quacieWGheWuueS/ruaUueeahOi+k+WFpeahhuadpeaPkOekuueUqOaItwogICAgICAgICAgICBpc01vZGlmaWVkID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOW9k+ihqOWNleWGheWuueacieS/ruaUueS4lOW5tuacquaPkOS6pOaXtu+8jOemu+W8gOmhtemdouW8ueWHuuaPkOekugogICAgICAgICAgICBpZiAoaXNNb2RpZmllZCAmJiBub3RTdWJtaXQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgICQoZm9ybVNlbGVjdGVkKS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBub3RTdWJtaXQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0KfSk7Ci8qKgogKiDoh6rlrprkuYnmlbDmja7pqozor4Hmj5Lku7YKICog5L6d6LWWalF1ZXJ55o+S5Lu2CiAqIOS9v+eUqOaWueW8j++8mgogKiAkKHNlbGVjdG9yKS52YWxpZGF0ZSh7CiAqICAgcnVsZXM6IHsKICogICAgICdpbnB1dEEnOiAicmVxdWlyZWQiLAogKiAgICAgJ2lucHV0Qic6ICJudW1iZXIiLAogKiAgICAgJ2lucHV0Qyc6IC9eW2Etel0rJC8sCiAqICAgICAnaW5wdXREJzogewogKiAgICAgICAgInJlcXVpcmVkIjogdHJ1ZSwKICogICAgICAgICJyZWdleCI6IC9wYXR0ZXJuLywKICogICAgICAgICJtYXhMZW5ndGgiOiAzCiAqICAgICAgfQogKiAgIH0sCiAqICAgbWVzc2FnZXM6IHsKICogICAgICdpbnB1dEEnOiAiQeS4jeiDveS4uuepuiIsCiAqICAgICAnaW5wdXRCJzogIkLlj6rog73kuLrmlbDlrZciLAogKiAgICAgJ2lucHV0Qyc6ICJD5Y+q6IO95Li65bCP5YaZ5a2X5q+NIgogKiAgICAgJ2lucHV0RCc6IHsKICogICAgICAgICJyZXF1aXJlZCI6ICJE5LiN6IO95Li656m6IiwKICogICAgICAgICJyZWdleCI6ICJE6KaB56ym5ZCIeHjmoLzlvI8iLAogKiAgICAgICAgIm1heExlbmd0aCI6ICJE6ZW/5bqm5pyA5aSn5YC85Li6MyIKICogICAgICB9CiAqICAgfSwKICogICBlcnJvckNsYXNzOiAiZXJyb3ItY2xhc3MtbmFtZSIKICogfSk7CiAqCiAqIOazqOaEj+S6i+mhue+8mgogKiAxLiBzZWxlY3RvcuW/hemhu+S4uuihqOWNleWFg+e0oAogKiAyLiBpbnB1dEEsQixDLETlv4XpobvmmK/or6XooajljZXnmoTlrZDlhYPntKDvvIjkuI3pnIDopoHkuLrnm7TmjqXlrZDlhYPntKDvvIkKICogMy4g56S65L6L5Lit55qEaW5wdXRBLEIsQyxE5YiG5Yir5piv55u45bqU6KGo5Y2V5YWD57Sg55qEbmFtZeWxnuaAp+WAvAogKgogKiBDcmVhdGVkIGJ5IEphc29uU2kKICovCgoidXNlIHN0cmljdCI7CgooZnVuY3Rpb24gKCQpIHsKICAgIC8vIOWumuS5ieS4gOS6m+ato+WImeihqOi+vuW8j+eUqOS6juWIpOaWrQogICAgdmFyIFJFR0VYID0gewogICAgICAgIHJlcXVpcmVkOiB7CiAgICAgICAgICAgIHJlZzogL1xTKy8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkuI3og73kuLrnqboiCiAgICAgICAgfSwKCiAgICAgICAgbnVtYmVyOiB7CiAgICAgICAgICAgIHJlZzogL14kfF5bKy1dP1xkKyhcLlxkKyk/JC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlj6rog73kuLrmlbDlgLzmiJbkuI3loasiCiAgICAgICAgfSwKICAgICAgICBpbnRlZ2VyOiB7CiAgICAgICAgICAgIHJlZzogL14kfF5bKy1dP1xkKyQvLAogICAgICAgICAgICBtZXNzYWdlOiAi5Y+q6IO95Li65pW05pWw5oiW5LiN5aGrIgogICAgICAgIH0sCiAgICAgICAgcG9zaXRpdmVJbnRlZ2VyOiB7CiAgICAgICAgICAgIHJlZzogL14kfF5cKz9bMS05XVxkKiQvLAogICAgICAgICAgICBtZXNzYWdlOiAi5Y+q6IO95Li65q2j5pW05pWw5oiW5LiN5aGrIgogICAgICAgIH0sCiAgICAgICAgZGlnaXRzOiB7CiAgICAgICAgICAgIHJlZzogL14kfF5cZCokLywKICAgICAgICAgICAgbWVzc2FnZTogIuWPquiDveWQq+acieaVsOWtl+aIluS4jeWhqyIKICAgICAgICB9LAogICAgICAgIGVtYWlsOiB7CiAgICAgICAgICAgIHJlZzogL14kfF5bYS16QS1aMC05LiEjJCUmJyorXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE6YKu566xIgogICAgICAgIH0sCiAgICAgICAgYWNjb3VudDogewogICAgICAgICAgICByZWc6IC9eJHxeW2EtekEtWjAtOV9cdTRlMDAtXHU5ZmE1XSskLywKICAgICAgICAgICAgLy8gIF5bXHU0ZTAwLVx1OWZhNUEtWmEtejAtOS1fXSokICDlj6rog73kuK3oi7HmlofvvIzmlbDlrZfvvIzkuIvliJLnur/vvIzlh4/lj7cKICAgICAgICAgICAgbWVzc2FnZTogIuaxieWtl+OAgeaVsOWtl+OAgeWtl+avjeOAgeS4i+WIkue6vyIKICAgICAgICB9LAogICAgICAgIHBhc3N3b3JkOiB7CiAgICAgICAgICAgIC8vIHJlZzogL15cd3s2LDIwfSQvLAoKICAgICAgICAgICAgcmVnOiAvXiR8W2EtekEtWjAtOV8uLH4hQCMkJV4mKigpXystPTw+Ojt8Py9cXGAnIlxbXF1dKyQvLAogICAgICAgICAgICBtZXNzYWdlOiAi5pWw5a2X44CB5a2X5q+N5oiW54m55q6K56ym5Y+377yMNC0yMOS9jSIKICAgICAgICB9LAogICAgICAgIHVybDogewogICAgICAgICAgICByZWc6IC9eJHxeKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cL1wvKSg/OlxTKyg/OjpcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKS4/KSg/OjpcZHsyLDV9KT8oPzpbLz8jXVxTKik/JC9pLAogICAgICAgICAgICBtZXNzYWdlOiAi5Y+q6IO95Li6VVJM5qC85byP5oiW5LiN5aGrIgogICAgICAgIH0sCiAgICAgICAgY2VsbHBob25lOiB7CiAgICAgICAgICAgIHJlZzogL14kfF4xKDNbMC05XXw1WzAxMjM1Njc4OV18N1s2NzhdfDhbMC05XXw0WzU3XSlbMC05XXs4fSQvLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3IgogICAgICAgIH0sCiAgICAgICAgZGF0ZTogewogICAgICAgICAgICByZWc6IC9eJHxeXGR7NH0tKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEyXVxkfDNbMDFdKSQvLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE5pel5pyf5qC85byP77yIeHh4eC14eC14eO+8iSIKICAgICAgICB9LAogICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgcmVnOiAvXiR8XigoMFxkfDFcZCl8KDJbMDEyM10pKSg6WzAtNV1cZCl7MSwyfSQvLAogICAgICAgICAgICBtZXNzYWdlOiAi5Y+q6IO95Li65pe26Ze05qC85byP77yIeHg6eHg6eHjmiJZ4eDp4eO+8ieaIluS4jeWhqyIKICAgICAgICB9LAogICAgICAgIElEOiB7CiAgICAgICAgICAgIHJlZzogL14kfCheXGR7MTV9JCl8KF5cZHsxN30oWzAtOV18WCkkKS8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmnInmlYjouqvku73or4EiCiAgICAgICAgfSwKICAgICAgICBzZXg6IHsKICAgICAgICAgICAgcmVnOiAvXiR8XihcdTc1Mzd8XHU1OTczKSQvLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55S35oiW5aWzIgogICAgICAgIH0KICAgIH07CgogICAgdmFyIGRlZmF1bHRzID0gewoKICAgICAgICAvLyDlrprkuYnpu5jorqTplJnor6/nsbvlkI3vvIznlKjku6Xmt7vliqDmoLflvI8KICAgICAgICBlcnJvckNsYXNzOiAiZXJyb3IiLAogICAgICAgIGFkZEVycm9yTXNnOiB0cnVlLAoKICAgICAgICAvLyDlrprkuYnpu5jorqTnmoTplJnor6/mj5DnpLrkv6Hmga8KICAgICAgICBlcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGVycm9yTWVzc2FnZShyZWd1bGF0aW9uKSB7CiAgICAgICAgICAgIHZhciBkZWZhdWx0TWVzc2FnZSA9ICLmoLzlvI/kuI3mraPnoa4iOwoKICAgICAgICAgICAgaWYgKFJlZ0V4cC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihyZWd1bGF0aW9uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWd1bGF0aW9uID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICBpZiAoUkVHRVguaGFzT3duUHJvcGVydHkocmVndWxhdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUkVHRVhbcmVndWxhdGlvbl0ubWVzc2FnZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWd1bGF0aW9uID09ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgICB2YXIgck5hbWUgPSByZWd1bGF0aW9uLnJlZ3VsYXRpb25OYW1lOwogICAgICAgICAgICAgICAgdmFyIHJEZXRhaWwgPSByZWd1bGF0aW9uLnJlZ3VsYXRpb25EZXRhaWw7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZXF1YWxUbyI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAi5Lik5qyh6L6T5YWl5YaF5a655LiN5LiA6Ie0IjsKICAgICAgICAgICAgICAgICAgICBjYXNlICJtYXhMZW5ndGgiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIuS4jeiDvei2hei/hyIgKyBwYXJzZUludChyRGV0YWlsKSArICLkuKrlrZfnrKYiOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIm1pbkxlbmd0aCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAi5LiN6IO95bCR5LqOIiArIHBhcnNlSW50KHJEZXRhaWwpICsgIuS4quWtl+espiI7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAibWF4IjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICLmlbDlgLzkuI3og73lpKfkuo4iICsgcGFyc2VJbnQockRldGFpbCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAibWluIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICLmlbDlgLzkuI3og73lsI/kuo4iICsgcGFyc2VJbnQockRldGFpbCk7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJEZXRhaWwgJiYgUkVHRVhbck5hbWVdID8gUkVHRVhbck5hbWVdLm1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0TWVzc2FnZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgdmFyIG1ldGhvZHMgPSB7CiAgICAgICAgc2ltcGxlSnVkZ2U6IGZ1bmN0aW9uIHNpbXBsZUp1ZGdlKHJlZ3VsYXRpb24sIHZhbHVlKSB7CiAgICAgICAgICAgIC8vIFRPRE86IOaUr+aMgeabtOWkmueahOmqjOivgeagvOW8jwogICAgICAgICAgICBpZiAoUmVnRXhwLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlZ3VsYXRpb24pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVndWxhdGlvbi50ZXN0KHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdFWC5oYXNPd25Qcm9wZXJ0eShyZWd1bGF0aW9uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFJFR0VYW3JlZ3VsYXRpb25dLnJlZy50ZXN0KHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuS4jeaUr+aMgVwiIiArIHJlZ3VsYXRpb24gKyAiXCLnsbvlnovmlbDmja7pqozor4HvvIzpu5jorqTpgJrov4fpqozor4EiKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmdXJ0aGVySnVkZ2U6IGZ1bmN0aW9uIGZ1cnRoZXJKdWRnZShyZWd1bGF0aW9uTmFtZSwgcmVndWxhdGlvbkRldGFpbCwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiByZWd1bGF0aW9uTmFtZSAhPSAnc3RyaW5nJykgcmV0dXJuIHRydWU7CgogICAgICAgICAgICBpZiAoUkVHRVguaGFzT3duUHJvcGVydHkocmVndWxhdGlvbk5hbWUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIXJlZ3VsYXRpb25EZXRhaWwgfHwgUkVHRVhbcmVndWxhdGlvbk5hbWVdLnJlZy50ZXN0KHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAocmVndWxhdGlvbk5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdlcXVhbFRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZmluZCgiW25hbWU9XCIiICsgcmVndWxhdGlvbkRldGFpbCArICJcIl0iKS52YWwoKSA9PSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWdleCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWdFeHAocmVndWxhdGlvbkRldGFpbCkudGVzdCh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF4TGVuZ3RoJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA8PSBwYXJzZUludChyZWd1bGF0aW9uRGV0YWlsKTsKICAgICAgICAgICAgICAgICAgICBjYXNlICdtaW5MZW5ndGgnOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID49IHBhcnNlSW50KHJlZ3VsYXRpb25EZXRhaWwpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdmFsdWUgfHwgcGFyc2VGbG9hdCh2YWx1ZSkgPD0gcGFyc2VGbG9hdChyZWd1bGF0aW9uRGV0YWlsKTsKICAgICAgICAgICAgICAgICAgICBjYXNlICdtaW4nOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHBhcnNlRmxvYXQodmFsdWUpID49IHBhcnNlRmxvYXQocmVndWxhdGlvbkRldGFpbCk7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi5LiN5pSv5oyBXCIiICsgcmVndWxhdGlvbk5hbWUgKyAiXCLnsbvlnovmlbDmja7pqozor4HvvIzpu5jorqTpgJrov4fpqozor4EiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBhZGRFcnJvcjogZnVuY3Rpb24gYWRkRXJyb3IoZWxlbWVudCwgbWVzc2FnZSwgZXJyb3JDbGFzcykgewogICAgICAgICAgICAvLyBUT0RPOiDlvZPmnInlpJrkuKrplJnor6/ml7bvvIzlr7vmib7kuIDkuKrmm7Tlj4vlpb3nmoTmmL7npLrmlrnlvI8KICAgICAgICAgICAgdmFyIGV4aXN0TGFiZWwgPSBlbGVtZW50Lm5leHQoImxhYmVsLiIgKyBlcnJvckNsYXNzKTsKICAgICAgICAgICAgaWYgKGV4aXN0TGFiZWwubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBleGlzdExhYmVsWzBdLmlubmVySFRNTCArPSAiICIgKyBtZXNzYWdlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gIjxsYWJlbCBjbGFzcz1cIiIgKyBlcnJvckNsYXNzICsgIlwiIGZvcj1cIiIgKyBlbGVtZW50LmF0dHIoIm5hbWUiKSArICJcIj4iICsgbWVzc2FnZSArICI8L2xhYmVsPiI7CiAgICAgICAgICAgICAgICBlbGVtZW50LmFmdGVyKGxhYmVsKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBlcnJvck1lc3NhZ2UocmVndWxhdGlvbiwgY3VzdG9tTWVzc2FnZSkgewogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBpZiAodHlwZW9mIGN1c3RvbU1lc3NhZ2UgPT0gJ29iamVjdCcpIHsKCiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/lr7nosaHvvIzliJnlj5blr7nlupRyZWd1bGF0aW9u55qEbWVzc2FnZQogICAgICAgICAgICAgICAgY3VzdG9tTWVzc2FnZSA9IGN1c3RvbU1lc3NhZ2UgfHwge307CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWd1bGF0aW9uID09ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9tTWVzc2FnZVtyZWd1bGF0aW9uLnJlZ3VsYXRpb25OYW1lXTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9tTWVzc2FnZVtyZWd1bGF0aW9uXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbU1lc3NhZ2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5aaC5p6ccmVzdWx05pivMO+8jOKAnOKAne+8jHVuZGVmaW5lZO+8jG51bGznrYnlgLzvvIzliJnov5Tlm57pu5jorqTlgLwKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBkZWZhdWx0cy5lcnJvck1lc3NhZ2UocmVndWxhdGlvbikgfHwgIuagvOW8j+S4jeato+ehriI7CiAgICAgICAgfSwKICAgICAgICBjaGVja0Vycm9yOiBmdW5jdGlvbiBjaGVja0Vycm9yKHJlZ3VsYXRpb24sIGlucHV0TmFtZSwgZXJyb3JDbGFzcywgY2FsbGJhY2spIHsKICAgICAgICAgICAgLy8g5qC55o2ubmFtZeWxnuaAp+WAvOWvu+aJvumcgOimgeaVsOaNrumqjOivgeeahOWFg+e0oAogICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5maW5kKCJbbmFtZT1cIiIgKyBpbnB1dE5hbWUgKyAiXCJdIik7CiAgICAgICAgICAgIGlmICghJGlucHV0Lmxlbmd0aCkgcmV0dXJuIHRydWU7CgogICAgICAgICAgICAvLyDmuIXpmaTkuYvliY3mo4DpqozkuqfnlJ/nmoTplJnor6/mj5DnpLrmoIfnrb4KICAgICAgICAgICAgJGlucHV0Lm5leHQoImxhYmVsLiIgKyBlcnJvckNsYXNzKS5yZW1vdmUoKTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVndWxhdGlvbiA9PSAib2JqZWN0IiAmJiAhUmVnRXhwLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlZ3VsYXRpb24pKSB7CgogICAgICAgICAgICAgICAgLy8gU2FtcGxlOiBydWxlczp7ImlucHV0Rm9vIjogeyJyZXF1aXJlZCI6IHRydWUsICJtYXhMZW5ndGgiOiAxNn19CiAgICAgICAgICAgICAgICByZWd1bGF0aW9uID0gcmVndWxhdGlvbiB8fCB7fTsKICAgICAgICAgICAgICAgIHZhciBpbnB1dFZhbGkgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gcmVndWxhdGlvbikgewoKICAgICAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZHMuZnVydGhlckp1ZGdlLmNhbGwodGhpcywgciwgcmVndWxhdGlvbltyXSwgJGlucHV0LnZhbCgpKSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCJsZWdlbCIpLmFkZENsYXNzKCJpbGxlZ2VsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbGkgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soJGlucHV0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWd1bGF0aW9uTmFtZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ3VsYXRpb25EZXRhaWw6IHJlZ3VsYXRpb25bcl0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCJpbGxlZ2VsIikuYWRkQ2xhc3MoImxlZ2VsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgLy8gU2FtcGxlOiBydWxlczp7ImlucHV0Rm9vIjogInJlcXVpcmVkIn0KICAgICAgICAgICAgICAgIGlmICghbWV0aG9kcy5zaW1wbGVKdWRnZS5jYWxsKHRoaXMsIHJlZ3VsYXRpb24sICRpbnB1dC52YWwoKSkpIHsKICAgICAgICAgICAgICAgICAgICAkaW5wdXQucmVtb3ZlQ2xhc3MoImxlZ2VsIikuYWRkQ2xhc3MoImlsbGVnZWwiKTsKCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soJGlucHV0LCByZWd1bGF0aW9uKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCJpbGxlZ2VsIikuYWRkQ2xhc3MoImxlZ2VsIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBjaGVja09uQmx1cjogZnVuY3Rpb24gY2hlY2tPbkJsdXIocmVndWxhdGlvbiwgaW5wdXROYW1lKSB7fQoKICAgIH07CgogICAgdmFyIGFkZFZhbGlkYXRvciA9IGZ1bmN0aW9uIGFkZFZhbGlkYXRvcihhcmcpIHsKICAgICAgICB2YXIgcnVsZXMgPSBhcmcucnVsZXMgfHwge307CiAgICAgICAgdmFyIG1lc3NhZ2VzID0gYXJnLm1lc3NhZ2VzIHx8IHt9OwogICAgICAgIHZhciBlcnJvckNsYXNzID0gYXJnLmVycm9yQ2xhc3M7CiAgICAgICAgdmFyIGFkZEVycm9yTXNnID0gYXJnLmFkZEVycm9yTXNnIHx8IGRlZmF1bHRzLmFkZEVycm9yTXNnOwogICAgICAgIC8vIOWmguaenOS8oOWFpeWvueixoeaIluiAhW51bGwsdW5kZWZpbmVkLCcn562J56m65YC877yM5L2/55So6buY6K6k5YC8CiAgICAgICAgaWYgKHR5cGVvZiBlcnJvckNsYXNzID09ICJvYmplY3QiIHx8ICFlcnJvckNsYXNzKSB7CiAgICAgICAgICAgIGVycm9yQ2xhc3MgPSBkZWZhdWx0cy5lcnJvckNsYXNzOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zdWJtaXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaXNWYWxpZCA9IHRydWU7CiAgICAgICAgICAgIGZvciAodmFyIGlucHV0TmFtZSBpbiBydWxlcykgewogICAgICAgICAgICAgICAgbWV0aG9kcy5jaGVja0Vycm9yLmNhbGwodGhpcywgcnVsZXNbaW5wdXROYW1lXSwgaW5wdXROYW1lLCBlcnJvckNsYXNzLCBmdW5jdGlvbiAoZWxlbWVudCwgcmVndWxhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGlmIChhZGRFcnJvck1zZykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1ldGhvZHMuZXJyb3JNZXNzYWdlKHJlZ3VsYXRpb24sIG1lc3NhZ2VzW2lucHV0TmFtZV0pOwogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLmFkZEVycm9yKGVsZW1lbnQsIG1lc3NhZ2UsIGVycm9yQ2xhc3MpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8g5LiA5pem5pyJ5LiA5Liq5pWw5o2u6aqM6K+B57uT5p6c6ZSZ6K+v77yMIOWwseS8muaJp+ihjOivpeWbnuiwg++8jCDlsIbmoIflv5fkvY3nva7kuLpmYWxzZQogICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgaW5wdXRWYWxpZCA9IHRydWU7CiAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHJ1bGVzKSB7CiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksCiAgICAgICAgICAgICAgICAkaW5wdXQgPSAkdGhpcy5maW5kKCJbbmFtZT1cIiIgKyBpbnB1dE5hbWUgKyAiXCJdIik7CiAgICAgICAgICAgIGlmICghJGlucHV0Lmxlbmd0aCkgcmV0dXJuIHRydWU7CgogICAgICAgICAgICAoZnVuY3Rpb24gKCRpbnB1dCwgaW5wdXROYW1lKSB7CiAgICAgICAgICAgICAgICAkaW5wdXQuYmluZCgiYmx1ciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAkaW5wdXQuYmluZCgiaW5wdXQgcHJvcGVydHljaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRpbnB1dC5oYXNDbGFzcygiaWxsZWdlbCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5jaGVja0Vycm9yLmNhbGwoJHRoaXMsIHJ1bGVzW2lucHV0TmFtZV0sIGlucHV0TmFtZSwgZXJyb3JDbGFzcywgZnVuY3Rpb24gKGVsZW1lbnQsIHJlZ3VsYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZEVycm9yTXNnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1ldGhvZHMuZXJyb3JNZXNzYWdlKHJlZ3VsYXRpb24sIG1lc3NhZ2VzW2lucHV0TmFtZV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5hZGRFcnJvcihlbGVtZW50LCBtZXNzYWdlLCBlcnJvckNsYXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSgkaW5wdXQsIGlucHV0TmFtZSk7CiAgICAgICAgfQogICAgfTsKCiAgICAkLmZuLnZhbGlkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbMF07CiAgICAgICAgaWYgKCF0aGlzLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gYWRkVmFsaWRhdG9yLmNhbGwodGhpcywgYXJnKTsKICAgICAgICB9CiAgICB9Owp9KShqUXVlcnkpOwoidXNlIHN0cmljdCI7CgokKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CgogICAgJCgiYm9keSIpLm9uKCJjbGljayIsICIjdmFsaS1idG4iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gJCh0aGlzKTsKICAgICAgICBfdGhpcy5hdHRyKCJkaXNhYmxlZCIsICJ0cnVlIik7CiAgICAgICAgaWYgKF90aGlzLmF0dHIoInRpbWUiKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIF90aGlzLmF0dHIoInRpbWUiLCAib24iKTsKICAgICAgICBzZXRUaW1lKF90aGlzLCA2MCk7CgogICAgICAgIGZ1bmN0aW9uIHNldFRpbWUoZWxlLCB0aW1lKSB7CiAgICAgICAgICAgIGlmICh0aW1lID09PSAwKSB7CiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQXR0cigiZGlzYWJsZWQgdGltZSIpLnRleHQoIumHjeaWsOiOt+WPlumqjOivgeeggSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWxlLnRleHQodGltZSArICJz56eS5ZCO6YeN5paw5Y+R6YCBIik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lKGVsZSwgdGltZSAtIDEpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB1cmwgPSBfdGhpcy5kYXRhKCJ1cmwiKSB8fCAnL3RlbGNvZGUnOwogICAgICAgICQucG9zdCh7CiAgICAgICAgICAgIHVybDogdXJsICsgJz9fcnVjYXB0Y2hhPScgKyAkKCJbbmFtZT0nX3J1Y2FwdGNoYSddIikudmFsKCkgKyAiJnBob25lPSIgKyAkKCJbcm9sZT0ncGhvbmUnXSIpLnZhbCgpLAogICAgICAgICAgICBkYXRhOiBidWlsZEZvcm0oKS5zZXJpYWxpemUoKQogICAgICAgIH0pOwogICAgfSk7CgogICAgLy8g6aqM6K+B56CB5Yi35pawCiAgICAkKCJib2R5Iikub24oImNsaWNrIiwgIiN2YWxpLWltZyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAkKHRoaXMpLmF0dHIoInNyYyIsICcvcnVjYXB0Y2hhLycpOwogICAgICAgIGlmICgkKCJbbmFtZT0nX3J1Y2FwdGNoYSddIikudmFsKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAkKCJbbmFtZT0nX3J1Y2FwdGNoYSddIikudHJpZ2dlcigiY2hhbmdlIik7CiAgICAgICAgfQogICAgfSk7CgogICAgJCgiYm9keSIpLm9uKCJpbnB1dCBwcm9wZXJ0eWNoYW5nZSIsICIjcGhvbmUtY29kZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpOwogICAgICAgIGlmIChfdGhpcy52YWwoKS5sZW5ndGggPCA0KSB7CiAgICAgICAgICAgICQoIiNjb21taXQiKS5hdHRyKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHZhciB0ZWxjb2RlID0gX3RoaXMudmFsKCk7CiAgICAgICAgdmFyIGZkID0gYnVpbGRGb3JtKCkuc2VyaWFsaXplKCk7CgogICAgICAgICQucG9zdCh7CiAgICAgICAgICAgIHVybDogJy9jaGVjay90ZWxjb2RlJyArICc/dGVsY29kZT0nICsgdGVsY29kZSwKICAgICAgICAgICAgZGF0YTogZmQsCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5wYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI3Bob25lLWNvZGUiKS5hZGRDbGFzcygibGVnZWwiKS5yZW1vdmVDbGFzcygiaWxsZWdlbCIpOwogICAgICAgICAgICAgICAgICAgICQoIiNjb21taXQiKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKCIjcGhvbmUtY29kZSIpLmFkZENsYXNzKCJpbGxlZ2VsIikucmVtb3ZlQ2xhc3MoImxlZ2VsIik7CiAgICAgICAgICAgICAgICAgICAgJCgiI2NvbW1pdCIpLmF0dHIoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHsKICAgICAgICAgICAgICAgICQoIiNjb21taXQiKS5hdHRyKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKfSk7CgokKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAvLyAkKCcjY29tbWVudCcpLm1vZGFsKCdoaWRlJyk7CiAgICAvLyAkKCJzcGFuW3JvbGU9J21hcmsnXSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgIC8vICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCkgKyAxOwogICAgLy8gICAgIGNvbnNvbGUubG9nKGluZGV4KTsKICAgIC8vICAgICAkKHRoaXMpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnZ2x5cGhpY29uLXN0YXInKS5hZGRDbGFzcygnZ2x5cGhpY29uLXN0YXItZW1wdHknKS5lbmQoKS5zaWJsaW5ncygpLmFuZFNlbGYoKS5zbGljZSgwLCBpbmRleCkucmVtb3ZlQ2xhc3MoJ2dseXBoaWNvbi1zdGFyLWVtcHR5JykuYWRkQ2xhc3MoJ2dseXBoaWNvbi1zdGFyJyk7CiAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoaW5kZXgpOwogICAgLy8gfSk7CgogICAgLy8g55Sf5oiQ5Yig6Zmk6aKE57qm55qE6KGo5Y2VCiAgICAkKCIjZGVsZXRlLW9yZGVyIikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpZCA9ICQodGhpcykuZGF0YSgnaWQnKTsKICAgICAgICBjb25maXJtKCfnoa7orqTliKDpmaQnLCAn5Yig6Zmk6K+l6aKE57qm77yfJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgJGlucHV0ID0gJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX21ldGhvZCIgdmFsdWU9ImRlbGV0ZSIgLz4nKTsKCiAgICAgICAgICAgIGJ1aWxkRm9ybSgkaW5wdXQpLmF0dHIoImFjdGlvbiIsICcvb3JkZXJzLycgKyBpZCkuc3VibWl0KCk7CiAgICAgICAgfSk7CiAgICB9KTsKICAgIC8vIOeUn+aIkOWIoOmZpOa2iOaBr+eahOihqOWNlQogICAgJCgiI2RlbGV0ZS1tc2ciKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpOwogICAgICAgIGNvbmZpcm0oJycsICfliKDpmaTor6Xmtojmga/vvJ8nLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgJGlucHV0ID0gJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX21ldGhvZCIgdmFsdWU9ImRlbGV0ZSIgLz4nKTsKCiAgICAgICAgICAgIGJ1aWxkRm9ybSgkaW5wdXQpLmF0dHIoImFjdGlvbiIsICcvdXNlcmNlbnRlci9tZXNzYWdlcy8nICsgaWQpLnN1Ym1pdCgpOwogICAgICAgIH0pOwogICAgfSk7CgogICAgLy8g55Sf5oiQ5L+u5pS55omL5py65Y+355qE6KGo5Y2VCiAgICAkKCIjZWRpdC1waG9uZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25maXJtKCcnLCBzZXRQaG9uZUZvcm0oKSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgJGlucHV0ID0gJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX21ldGhvZCIgdmFsdWU9IlBBVENIIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InBob25lX2NvZGUiIHZhbHVlPSInICsgJCgiI3Bob25lLWNvZGUiKS52YWwoKSArICciPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Im5ld19waG9uZSIgdmFsdWU9IicgKyAkKCIjbmV3LXBob25lIikudmFsKCkgKyAnIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICcpOwogICAgICAgICAgICBidWlsZEZvcm0oJGlucHV0KS5hdHRyKCJhY3Rpb24iLCAnL2FjY291bnQvcGhvbmUvdXBkYXRlJykuc3VibWl0KCk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyDnlJ/miJDkv67mlLnpgq7nrrHnmoTooajljZUKICAgICQoIiNlZGl0LWVtYWlsLCAjdmFsaWQtZW1haWwiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CgogICAgICAgIGNvbmZpcm0oJycsIHNldEVtYWlsRm9ybSgpLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgJGlucHV0ID0gJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX21ldGhvZCIgdmFsdWU9InBvc3QiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZW1haWwiIHZhbHVlPSInICsgJCgiI2VtYWlsLWlucHV0IikudmFsKCkgKyAnIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAnKTsKCiAgICAgICAgICAgIGJ1aWxkRm9ybSgkaW5wdXQpLmF0dHIoImFjdGlvbiIsICcvYWNjb3VudC9lbWFpbC92YWxpZGF0ZScpLnN1Ym1pdCgpOwogICAgICAgIH0pOwogICAgfSk7CgogICAgZnVuY3Rpb24gc2V0UGhvbmVGb3JtKCkgewogICAgICAgIHZhciBvbGRQaG9uZSA9ICQoIiNwaG9uZS1pbmZvIikudGV4dCgpOwogICAgICAgIHJldHVybiAnXG4gICAgICAgIDxmb3JtIGFjdGlvbj0iamF2YXNjcmlwdDogdm9pZCgwKSI+XG4gICAgICAgICAgPGRpdiBjbGFzcz0iZmllbGQiPlxuICAgICAgICAgICAgPHNwYW4gc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZmxvYXQ6IGxlZnQ7Ij7ljp/miYvmnLrlj7fvvJogJyArIG9sZFBob25lICsgJzwvc3Bhbj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwnaGlkZGVuXCcgdmFsdWU9XCcnICsgb2xkUGhvbmUgKyAnXCcgcm9sZT1cJ3Bob25lXCc+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz0iZmllbGQiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cJ2NvZGUtYm94XCcgc3R5bGU9IndpZHRoOiAxMDAlOyI+XG4gICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCd2YWxpLWNvZGVcJz7pqozor4HnoIE8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwnY29kZS1ib3hcJyBzdHlsZT0id2lkdGg6IDEwMCU7Ij5cbiAgICAgICAgICAgICAgPGlucHV0IGlkPVwncGhvbmUtY29kZVwnIGNsYXNzPVwnaW5wdXQgZm9ybS1jb250cm9sXCcgcGxhY2Vob2xkZXI9XCfor7fovpPlhaXpqozor4HnoIFcJyBuYW1lPVwnbmV3X3Bob25lXCcgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0idmFsaS1idG4iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIHN0eWxlPSJ3aWR0aDogNDAlOyBmbG9hdDogbGVmdDsiIGRhdGEtdXJsPVwnL190ZWxjb2RlXCc+6I635Y+W6aqM6K+B56CBPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWVsZCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCduZXctcGhvbmVcJz7or7fovpPlhaXmlrDmiYvmnLrlj7c8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5ldy1waG9uZSIgY2xhc3M9ImlucHV0IGZvcm0tY29udHJvbCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICAnOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEVtYWlsRm9ybSgpIHsKICAgICAgICB2YXIgb2xkRW1haWwgPSAkKCIjZWRpdC1lbWFpbCIpLmxlbmd0aCA+IDAgPyAiIiA6ICQoIiNlbWFpbC1pbmZvIikudGV4dCgpOwogICAgICAgIHZhciBmb3JtVGlwID0gJCgiI2VkaXQtZW1haWwiKS5sZW5ndGggPiAwID8gIuS/ruaUuemCrueusSIgOiAi6aqM6K+B6YKu566xIjsKICAgICAgICByZXR1cm4gJ1xuICAgICAgICA8Zm9ybSBhY3Rpb249ImphdmFzY3JpcHQ6IHZvaWQoMCkiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9ImZpZWxkIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cJ3ZhbGlkLWVtYWlsLWlucHV0XCc+JyArIGZvcm1UaXAgKyAnPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJlbWFpbC1pbnB1dCIgY2xhc3M9ImlucHV0IGZvcm0tY29udHJvbCIgdmFsdWU9IicgKyBvbGRFbWFpbCArICciIHBsYWNlaG9sZGVyPSLor7fovpPlhaXpgq7nrrEiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+57O757uf5bCG5Y+R6YCB6aqM6K+B5L+h5oGv5Yiw6K+l6YKu566x77yM6K+35rOo5oSP5p+l5pS26aqM6K+BPC9wPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgICc7CiAgICB9Cn0pOwoKCi8vIOiOt+WPlueUqOaIt+ivvueoiwovLyDpppbpobXor77nqIvnrKzkuIDpg6jliIYKJChmdW5jdGlvbigpIHsKCWdldENvdXJzZXMoUk9PVCArICJnZXRfY291cnNlcy8iLCBjb3Vyc2VCSyk7Cn0pCgovLyDliqjmgIHmt7vliqDor77nqIsKZnVuY3Rpb24gZ2V0Q291cnNlcyh1cmwsIGNhbGxCSykgewoJJC5hamF4KHsKCQl1cmw6IHVybCwKCQl0eXBlOiAiUE9TVCIsCgkJZGF0YVR5cGU6ICJqc29uIiwKCQljcm9zc0RvbWFpbjogdHJ1ZSwKCQl4aHJGaWVsZHM6IHsKCQkJd2l0aENyZWRlbnRpYWxzOiB0cnVlCgkJfSwKCQlzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsKCQkJaWYgKHJlcy5jb2RlID09IDEwMDApIHsKCQkJCWNvbnNvbGUubG9nKHJlcy5jb3Vyc2VzKTsKCQkJCWNhbGxCSyhyZXMpOwoJCQl9IGVsc2UgewoJCQkJY29uc29sZS5sb2cocmVzLm1zZyk7CgkJCX0KCQl9LAoJCWVycm9yOiBmdW5jdGlvbihlcnIpIHsKCQkJY29uc29sZS5sb2coZXJyKTsKCQl9Cgl9KQp9CgovLyDlm57osIPlh73mlbAKZnVuY3Rpb24gY291cnNlQksocmVzKSB7Cgl2YXIgJGJveCA9ICQoIiN1c2VyLWNvdXJzZSIpOwoJdmFyIGNvdXJzZXMgPSByZXMuY291cnNlcwoJdmFyIHNpemUgPSBjb3Vyc2VzLmxlbmd0aAoJZm9yKHZhciBpIGluIGNvdXJzZXMpIHsKCQkkYm94LmFwcGVuZChjcmVhdGVDb3Vyc2UoY291cnNlc1tpXSkpOwoJfQogICAgJGJveC5vbigiY2xpY2siLCAiYSIsIGZ1bmN0aW9uKCkgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICQodGhpcykuZGF0YSgiaHJlZiIpOwogICAgfSkKfQoKLy8g55Sf5oiQ6K++56iL6IqC54K5CmZ1bmN0aW9uIGNyZWF0ZUNvdXJzZShjb3Vyc2UpIHsKCXZhciBsaVN0ciA9ICJcCiAgICAgICAgPGRpdiBjbGFzcz0nY29sLW1kLTMgZ2FsbGVyeS1ncmlkJz5cCiAgICAgICAgICAgIDxhIGRhdGEtaHJlZj0nL3ZpZXcvbGVzc29uLmh0bWw/Y2hhcHRlcl9pbmRleD0xJmxlc3Nvbl9pbmRleD0xJmNvdXJzZV9pZD0iICsgY291cnNlLmlkICsgIicgY2xhc3M9J2V4YW1wbGUtaW1hZ2UtbGluaycgZGF0YS1saWdodGJveD0nZXhhbXBsZS1zZXQnIHRhcmdldD0nX2JsYW5rJyA+XAogICAgICAgICAgICA8aW1nIGNsYXNzPSdleGFtcGxlLWltYWdlJyBzcmM9JyIgKyBJTUdST09UICsgY291cnNlLmNvdmVyICsgIicvPjwvYT5cCiAgICAgICAgPC9kaXY+XAoJIgoJcmV0dXJuICQobGlTdHIpOwp9Cg=="></script>
		<!-- Custom Theme files -->
		<!--//theme-style-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta
			name="keywords"
			content="course Box  Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design"/>
		<script type="application/x-javascript">
			addEventListener("load", function () {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
	</head>

	<body>
		<!-- header -->
		<div class="top-banner">
			<div class="header">
				<div class="container">
					<div class="headr-left">
						<div class="social">
							<a href="#">
								<i class="facebook"></i>
							</a>
							<a href="#">
								<i class="twitter"></i>
							</a>
							<a href="#">
								<i class="gplus"></i>
							</a>
							<a href="#">
								<i class="pin"></i>
							</a>
							<a href="#">
								<i class="youtube"></i>
							</a>
						</div>
						<div class="clearfix"></div>
					</div>
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<div class="headr-right">
						<div class="search">
							<form>
								<input type="submit" value="">
								<input type="text" value="" placeholder="Search...">
							</form>
						</div>
						<div class="details collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<ul class="" style="float: right">
								<li class="active">
									<a href="/view">主页</a>
								</li>
								<li>
									<a href="/view/courses.html">所有课程</a>
								</li>
								<li>
									<a href="/view/gallery.html">考试管理</a>
								</li>
								<li>
									<a href="/view/usercenter">个人中心</a>
								</li>
								<li style="display: none;" id="user-info">
									<div class="dropdown">
										<a id="dLabel" data-target="#" href="javascript: void(0)" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
											<span class="glyphicon glyphicon-menu-down"></span>
										</a>

										<ul class="dropdown-menu" aria-labelledby="dLabel">
											<li class="m-option">观看记录</li>
											<li role="separator" class="divider"></li>
											<li class="m-option">我的课程</li>
											<li class="m-option">我的笔记</li>
											<li class="m-option">我的提问</li>
											<li role="separator" class="divider"></li>
											<li class="m-option" id="logout">退出</li>
										</ul>
									</div>
								</li>
								<li style="display: none;" id="session-info">
									<a id="login-btn" type="button" data-toggle="modal" data-target=".login">登录</a>
									<a id="signin-btn" type="button" data-toggle="modal" data-target=".login">注册</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>


		<!-- 个人信息 -->
		<div class="container">
			<div class="inner-block">
				<div id="usercenter-tab" class="user-info-tab tab">
					<ul>
						<li class="tab-list ">
							<a href="/view/usercenter/courses">我的课程</a>
						</li>
						<li class="tab-list active">
							<a href="/view/usercenter/notes">我的笔记</a>
						</li>
						<li class="tab-list">
							<a href="/view/usercenter/questions">我的提问</a>
						</li>
						<li class="tab-list ">
							<a href="/view/usercenter/messages">我的消息</a>
						</li>
						<li class="tab-list">
							<a href="/view/usercenter">基本信息</a>
						</li>
						<li class="tab-list ">
							<a href="/view/usercenter/more">更多</a>
						</li>
					</ul>
				</div>
				<div class="info-box fix-bounds t-scroll">
					<table class="table">
						<thead>
							<tr class="tr">
								<td class="td" width="20%">课程</td>
								<td class="td" width="20%">章节</td>
								<td class="td" width="20%">时间</td>
								<td class="td" width="20%">状态</td>
								<td class="td" width="20%">查看</td>
							</tr>
						</thead>
						<tbody class="ctr" id="notes"></tbody>
					</table>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			$(function() {
			  var $notes = $("#notes");
			  $.ajax({
				  url: ROOT + "my_note/",
				  type: "POST",
				  dataType: "JSON",
				  crossDomain: true,
    			  xhrFields: {
    				withCredentials: true
  				  },
				  success: function(res) {
					  var notes = res.notes;
					  for (var i in notes) {
						  var n = notes[i];
						  var $tr = $("<tr data-id='" + n.id + "'>\
							<td>" + 课程名 + "</td>\
							<td>" + n.title + "</td>\
							<td>" + n.time + "</td>\
							<td>" + n.public == true ? '公开' : '私有' + "</td>\
						  </tr>")
					  }
				  }
			  })
			})
		</script>
	</body>
</html>
